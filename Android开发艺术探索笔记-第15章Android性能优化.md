title: Android开发艺术探索笔记-第15章Android性能优化
date: 2016-04-02 15:52:10
tags: [android,性能优化]
categories: 《android开发艺术探索》笔记
---
android的性能优化
<!--more-->

<h2>Android的性能优化方法</h2>
<h4>布局优化</h4>
- 尽量减少布局的层级
- <include>标签的使用
- <merge>标签的使用
- <ViewStub>的使用
<h4>绘制优化</h4>
- onDraw中不要创建新的局部对象
- onDraw中不要做耗时操作
<h4>内存泄露优化</h4>
- 静态变量导致的内存泄露
- 单例模式导致的内存泄露
	- 单例模式的生命周期和Application保持一致，如果单例持有Activity，那么只能等到Application销毁的时候释放
- 属性动画导致的内存泄露
	- 比如，当Activity结束的时候要停止无限播放的动画
- 响应速度优化和ANR日志分析
	- 响应速度优化的核心是避免在主线程中做耗时操作，应将耗时操作放到子线程中去执行
<h4>ListView和Bitmap的优化</h4>
- 利用好缓存的view，ViewHolder
- 根据列表滑动状态来决定是控制任务的执行频率
- 最后开启硬件加速来时ListView的滑动更加顺畅

<h4>线程优化</h4>
尽量采用线程池，而不是每次都去创建一个新的线程
<h4>其他性能优化建议：</h4>
- 避免创建过多的对象
- 不要使用枚举
- 常量使用static final修饰
- 使用android特有的数据结构
- 适当使用软引用和弱引用
- 采用内存缓存和磁盘缓存
- 尽量采用静态内部类，可以避免潜在的由于内部类导致的内存泄露

<h2>内存泄露检测工具MAT</h2>

<h2>提高程序的可读性</h2>